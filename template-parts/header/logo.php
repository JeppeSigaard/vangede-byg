<?php

// Default værdier
$site_logo = false;
$site_logo_type = false;
$site_name = esc_attr(get_bloginfo('name'));
$site_url = esc_url(get_bloginfo('url'));

// Indstil til globalt logo
if(get_theme_mod('info_logo') !== ''){
    $site_logo = get_theme_mod('info_logo');
    $site_logo_type = get_headers($site_logo, 1)["Content-Type"];
}

// opret fra forældre
function smamo_page_logo_url_type($id){
    
    if (get_post_meta($id,'page_logo',true) !== ''){return;}
    
    $attachment_id = get_post_meta($id,'page_logo',true);
    
    $site_logo = wp_get_attachment_url($attachment_id);
    $site_logo_type = get_post_mime_type( $attachment_id );
}

$parents = get_post_ancestors( get_the_ID() );
foreach($parents as $parent){
    smamo_page_logo_url_type($parent);
}

// opret fra sig selv
smamo_page_logo_url_type(get_the_ID());

?>
<a href="<?php echo $site_url; ?>" class="top-banner-logo" title="<?php echo $site_name; ?>">
    <span><?php echo $site_name; ?></span>
    <?php if ($site_logo_type === 'image/svg+xml') : include_svg_path_from_uri($site_logo); ?>
    <?php elseif ($site_logo) : ?>
    <img src="<?php echo $site_logo; ?>">
    <?php else : ?>
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 640 162" xml:space="preserve"><polygon points="27.337,116.955 44.903,116.955 67.562,55.733 74.111,55.733 74.111,44.196 46.046,44.196 46.046,55.733 53.738,55.733 37.627,100.844 23.387,55.733 30.975,55.733 30.975,44.196 0.06,44.196 0.06,55.733 6.444,55.733 "/><path d="M103.734,105.314h-6.548V88.371h27.129v16.943h-6.652v11.641h30.455v-11.641h-7.172V65.504 c0-16.735-6.237-22.971-30.144-22.971c-23.907,0-29.623,6.236-29.623,22.971v39.811H74.11v11.641h29.624V105.314z M97.186,64.776 c0-8.315,3.326-10.186,13.512-10.186c10.083,0,13.617,1.871,13.617,10.186v11.538H97.186V64.776z"/><polygon points="181.482,105.314 174.414,105.314 174.414,67.687 202.687,116.955 217.758,116.955 217.758,55.733 225.658,55.733 225.658,44.196 197.801,44.196 197.801,55.733 204.766,55.733 204.766,94.088 176.181,44.196 153.521,44.196 153.521,55.733 161.525,55.733 161.525,105.314 153.521,105.314 153.521,116.955 181.482,116.955 "/><path d="M265.261,118.723c24.739,0,32.014-5.405,32.014-23.387v-15.28h-30.87v12.161h14.968v3.119 c0,9.354-2.495,11.329-15.384,11.329c-12.889,0-15.28-3.846-15.28-13.616v-25.05c0-9.875,2.183-13.513,14.656-13.513 c12.889,0,14.552,2.39,14.552,10.394v3.327h16.735V64.88c0-15.487-4.054-22.451-31.391-22.451c-24.946,0-31.806,7.587-31.806,25.57 v25.05C233.455,110.927,240.523,118.723,265.261,118.723z"/><polygon points="369.722,92.529 355.586,92.529 355.586,105.314 330.432,105.314 330.432,85.669 348.726,85.669 348.726,73.299 330.432,73.299 330.432,55.733 355.586,55.733 355.586,68.207 369.722,68.207 369.722,44.196 305.797,44.196 305.797,55.733 313.801,55.733 313.801,105.314 305.797,105.314 305.797,116.955 369.722,116.955 "/><path d="M417.743,44.196h-40.122v11.537h8.004v49.582h-8.004v11.641h40.019c22.14,0,29.208-6.859,29.208-25.05 V69.038C446.848,50.848,439.779,44.196,417.743,44.196z M429.696,92.113c0,10.082-2.391,13.201-12.057,13.201h-15.384V55.733 h15.487c9.875,0,11.953,2.806,11.953,12.993V92.113z"/><polygon points="519.293,92.529 505.157,92.529 505.157,105.314 480.003,105.314 480.003,85.669 498.297,85.669 498.297,73.299 480.003,73.299 480.003,55.733 505.157,55.733 505.157,68.207 519.293,68.207 519.293,44.196 455.368,44.196 455.368,55.733 463.372,55.733 463.372,105.314 455.368,105.314 455.368,116.955 519.293,116.955 "/><path d="M470.296,144.1v-0.092c2.014-0.412,4.486-1.922,4.486-7.187c0-6.089-1.785-8.104-7.92-8.104h-11.444v1.831 h3.433v28.383h-3.433v1.831h12.36c5.95,0,7.873-1.922,7.873-8.744C475.651,145.61,472.585,144.328,470.296,144.1z M460.911,130.549 h5.951c4.166,0,5.859,0.87,5.859,6.272c0,5.173-2.426,6.454-6.088,6.454h-5.723V130.549z M467.778,158.932h-6.867v-13.825h7.05 c2.884,0,5.631,1.465,5.631,6.959C473.592,157.833,472.035,158.932,467.778,158.932z"/><polygon points="491.721,130.549 495.383,130.549 488.837,144.603 482.198,130.549 485.632,130.549 485.632,128.718 477.347,128.718 477.347,130.549 480.093,130.549 487.692,146.617 487.692,158.932 484.259,158.932 484.259,160.763 493.186,160.763 493.186,158.932 489.752,158.932 489.752,146.617 497.352,130.549 500.098,130.549 500.098,128.718 491.721,128.718 "/><path d="M511.36,127.939c-6.363,0-9.109,2.152-9.109,9.431v14.695c0,7.324,2.7,9.476,9.109,9.476 c6.593,0,8.927-1.739,8.927-8.652v-6.729h-8.285v1.831h6.225v4.897c0,5.678-1.693,6.73-6.866,6.73c-4.944,0-7.05-1.145-7.05-7.554 V137.37c0-6.362,2.105-7.508,7.05-7.508c5.173,0,6.866,1.236,6.866,6.866v1.648h2.061v-1.648 C520.287,129.862,517.953,127.939,511.36,127.939z"/><path d="M538.115,133.413l-12.628-4.626v1.508l2.674,0.972v6.393l-2.674,0.98v1.489l12.628-4.718V133.413z M529.234,137.243v-5.57l7.716,2.767L529.234,137.243z"/><path d="M530.465,146.494l0.009,0.555c0,1.486,0.263,2.5,0.786,3.04c0.524,0.539,1.509,0.809,2.952,0.809 c1.504,0,2.531-0.259,3.08-0.776c0.549-0.519,0.823-1.49,0.823-2.914v-0.481v-5.301h-12.628v1.424h4.978V146.494z M531.667,142.849 h5.246v3.831l-0.01,0.545c0,1.006-0.161,1.643-0.485,1.911c-0.324,0.268-1.097,0.402-2.317,0.402c-1.043,0-1.709-0.199-1.998-0.597 c-0.29-0.398-0.436-1.303-0.436-2.716V142.849z"/><path d="M529.059,161.491c1.437,0,2.362-0.268,2.775-0.801s0.663-1.784,0.749-3.751 c0.08-1.678,0.231-2.687,0.453-3.025c0.223-0.34,0.843-0.509,1.86-0.509c0.906,0,1.49,0.216,1.753,0.647 c0.262,0.432,0.393,1.394,0.393,2.887c0,1.258-0.137,2.057-0.411,2.396c-0.274,0.34-0.921,0.509-1.938,0.509v1.416 c1.475,0,2.435-0.287,2.882-0.86c0.447-0.574,0.671-1.805,0.671-3.691c0-1.863-0.24-3.105-0.722-3.729s-1.44-0.935-2.877-0.935 c-2.072,0-3.183,1.07-3.331,3.21l-0.073,1.406l-0.074,1.48c-0.05,0.814-0.202,1.35-0.458,1.605s-0.77,0.384-1.541,0.384 c-1.19,0-1.923-0.188-2.196-0.564c-0.275-0.376-0.412-1.382-0.412-3.016c0-1.425,0.137-2.311,0.412-2.655 c0.273-0.346,0.976-0.519,2.104-0.519h0.314v-1.415l-0.564,0.009c-1.394,0-2.32,0.301-2.78,0.902 c-0.459,0.602-0.689,1.812-0.689,3.631c0,2.098,0.229,3.453,0.685,4.066C526.499,161.184,527.504,161.491,529.059,161.491z"/><path class="orange" d="M559.553,20.782c-1.104,0.906-2.908,2.388-4.011,3.293l-23.869,19.602 c-1.104,0.904-0.838,1.646,0.589,1.646h11.769c0.332,0,0.704-0.049,1.084-0.121v46.227c1.271-1.829,2.721-3.641,4.554-5.482 c2.429-2.415,4.902-4.321,7.537-5.842c5.304-3.088,11.278-4.486,18.982-4.486h40.699c4.235,0,6.838,1.97,8.842,3.941V45.204 c0.375,0.07,0.743,0.119,1.07,0.119h11.789c1.427,0,1.692-0.742,0.59-1.646L615.3,24.075c-1.104-0.906-2.907-2.388-4.011-3.294 L587.446,1.177c-0.55-0.452-1.274-0.678-1.999-0.68h-0.013c-0.725,0.001-1.449,0.227-1.999,0.679L559.553,20.782z M587.446,15.113 l15.474,12.731c1.102,0.905,2.905,2.387,4.008,3.294l6.717,5.515v28.968h-37.457c-7.182,0-13.396,1.079-18.982,3.368V36.638 l6.701-5.5c1.103-0.907,2.906-2.387,4.01-3.293l15.52-12.734C584.539,14.204,586.343,14.206,587.446,15.113z"/></svg>
    <?php endif; ?>
</a>